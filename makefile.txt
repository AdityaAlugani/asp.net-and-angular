 linux-vdso.so.1 (0x00007fff999b9000)
        libdl.so.2 => /usr/lib64/libdl.so.2 (0x00007f471b60d000)
        libstdc++.so.6 => /mu/dev/gcc/540/lib/../lib64/libstdc++.so.6 (0x00007f471b292000)
        libm.so.6 => /usr/lib64/libm.so.6 (0x00007f471b1b7000)
        libc.so.6 => /usr/lib64/libc.so.6 (0x00007f471afae000)
        libgcc_s.so.1 => /mu/dev/gcc/540/lib/../lib64/libgcc_s.so.1 (0x00007f471ad97000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f471b85d000)





2023-09-19T05:18:55.1531495Z ##[section]Starting: Build with UT execution
2023-09-19T05:18:55.1536497Z ==============================================================================
2023-09-19T05:18:55.1536899Z Task         : Command line
2023-09-19T05:18:55.1537137Z Description  : Run a command line script using Bash on Linux and macOS and cmd.exe on Windows
2023-09-19T05:18:55.1537346Z Version      : 2.178.0
2023-09-19T05:18:55.1537499Z Author       : Microsoft Corporation
2023-09-19T05:18:55.1537855Z Help         : https://docs.microsoft.com/azure/devops/pipelines/tasks/utility/command-line
2023-09-19T05:18:55.1538113Z ==============================================================================
2023-09-19T05:18:55.8244226Z Generating script.
2023-09-19T05:18:55.8246738Z ========================== Starting Command Output ===========================
2023-09-19T05:18:55.8258006Z [command]/usr/bin/bash --noprofile --norc /opt/ADO_Agent_0803/_work/_temp/6418643d-4bed-43a5-a401-b8529ba91e16.sh
2023-09-19T05:18:55.8258957Z Building TESTREPORHEL9 Linux
2023-09-19T05:18:55.8259684Z /opt/ADO_Agent_0803/_work/4/s
2023-09-19T05:18:55.8261212Z /opt/ADO_Agent_0803/_work/_temp/6418643d-4bed-43a5-a401-b8529ba91e16.sh: line 3: Agent.ReleaseDirectory: command not found
2023-09-19T05:18:55.8261905Z 
2023-09-19T05:18:55.8278085Z rm -f myMathTests main.o mymath.o test_mymath.o
2023-09-19T05:18:55.8279184Z /mu/bin/g++ -c mymath.cpp -o mymath.o
2023-09-19T05:18:55.8280333Z /mu/bin/g++ -I./cppunit/include -c test_mymath.cpp -o test_mymath.o
2023-09-19T05:18:55.9950448Z /mu/bin/g++ mymath.o test_mymath.o -L./cppunit/lib -ldl -Wl,--enable-new-dtags -Wl,-rpath,.,-rpath,./cppunit/lib -o myMathTests -lcppunit
2023-09-19T05:18:56.0661514Z /usr/bin/ld: test_mymath.o: in function `main':
2023-09-19T05:18:56.0694203Z test_mymath.cpp:(.text+0x49): undefined reference to `CppUnit::TestFactoryRegistry::getRegistry(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-19T05:18:56.0762190Z /usr/bin/ld: test_mymath.cpp:(.text+0xd5): undefined reference to `CppUnit::TextTestRunner::run(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, bool, bool)'
2023-09-19T05:18:56.0769320Z /usr/bin/ld: test_mymath.o: in function `MyMathTest::addTestsToSuite(CppUnit::TestSuiteBuilderContextBase&)':
2023-09-19T05:18:56.0771364Z test_mymath.cpp:(.text._ZN10MyMathTest15addTestsToSuiteERN7CppUnit27TestSuiteBuilderContextBaseE[_ZN10MyMathTest15addTestsToSuiteERN7CppUnit27TestSuiteBuilderContextBaseE]+0x69): undefined reference to `CppUnit::TestSuiteBuilderContextBase::getTestNameFor(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'
2023-09-19T05:18:56.0773038Z /usr/bin/ld: test_mymath.o: in function `MyMathTest::suite()':
2023-09-19T05:18:56.0774422Z test_mymath.cpp:(.text._ZN10MyMathTest5suiteEv[_ZN10MyMathTest5suiteEv]+0x4f): undefined reference to `CppUnit::TestSuite::TestSuite(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)'
2023-09-19T05:18:56.0775768Z /usr/bin/ld: test_mymath.o: in function `MyMathTest::testAdd()':
2023-09-19T05:18:56.0777147Z test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x57): undefined reference to `CppUnit::SourceLine::SourceLine(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)'
2023-09-19T05:18:56.0779098Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0xcb): undefined reference to `CppUnit::Message::Message(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-19T05:18:56.0780765Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x1bb): undefined reference to `CppUnit::SourceLine::SourceLine(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)'
2023-09-19T05:18:56.0802971Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x22f): undefined reference to `CppUnit::Message::Message(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-19T05:18:56.0808539Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x31f): undefined reference to `CppUnit::SourceLine::SourceLine(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)'
2023-09-19T05:18:56.0810351Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x37b): undefined reference to `CppUnit::Message::Message(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-19T05:18:56.0812020Z /usr/bin/ld: test_mymath.o: in function `CppUnit::TestCaller<MyMathTest>::TestCaller(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, void (MyMathTest::*)(), MyMathTest*)':
2023-09-19T05:18:56.0813959Z test_mymath.cpp:(.text._ZN7CppUnit10TestCallerI10MyMathTestEC2ENSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEMS1_FvvEPS1_[_ZN7CppUnit10TestCallerI10MyMathTestEC5ENSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEMS1_FvvEPS1_]+0x2c): undefined reference to `CppUnit::TestCase::TestCase(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-19T05:18:56.0815158Z /usr/bin/ld: test_mymath.o: in function `CppUnit::AutoRegisterSuite<MyMathTest>::AutoRegisterSuite()':
2023-09-19T05:18:56.0816367Z test_mymath.cpp:(.text._ZN7CppUnit17AutoRegisterSuiteI10MyMathTestEC2Ev[_ZN7CppUnit17AutoRegisterSuiteI10MyMathTestEC5Ev]+0x36): undefined reference to `CppUnit::TestFactoryRegistry::getRegistry(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-19T05:18:56.0817647Z /usr/bin/ld: test_mymath.o:(.rodata._ZTVN7CppUnit10TestCallerI10MyMathTestEE[_ZTVN7CppUnit10TestCallerI10MyMathTestEE]+0x40): undefined reference to `CppUnit::TestCase::getName[abi:cxx11]() const'
2023-09-19T05:18:56.0819095Z /usr/bin/ld: test_mymath.o:(.rodata._ZTVN7CppUnit10TestCallerI10MyMathTestEE[_ZTVN7CppUnit10TestCallerI10MyMathTestEE]+0x48): undefined reference to `CppUnit::Test::findTestPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, CppUnit::TestPath&) const'
2023-09-19T05:18:56.0820522Z /usr/bin/ld: test_mymath.o:(.rodata._ZTVN7CppUnit10TestCallerI10MyMathTestEE[_ZTVN7CppUnit10TestCallerI10MyMathTestEE]+0x58): undefined reference to `CppUnit::Test::findTest(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'
2023-09-19T05:18:56.0822026Z /usr/bin/ld: test_mymath.o:(.rodata._ZTVN7CppUnit10TestCallerI10MyMathTestEE[_ZTVN7CppUnit10TestCallerI10MyMathTestEE]+0x60): undefined reference to `CppUnit::Test::resolveTestPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'
2023-09-19T05:18:56.0822972Z collect2: error: ld returned 1 exit status
2023-09-19T05:18:56.0823542Z make: *** [Makefile:13: build] Error 1
2023-09-19T05:18:56.0851442Z ##[error]Bash exited with code '2'.
2023-09-19T05:18:56.0877838Z ##[section]Finishing: Build with UT execution







CXX = /mu/bin/g++

RUNTIMEPATH=./cppunit/lib
TEST_SHARED_LIBS = -Wl,--enable-new-dtags -Wl,-rpath,.,-rpath,$(RUNTIMEPATH)
SOURCES = mymath.cpp main.cpp test_mymath.cpp
CPPFLAGS = -I./cppunit/include
CXXFLAGS = -std=c++11
LDFLAGS = -L./cppunit/lib -ldl
LDLIBS = -lcppunit
EXECUTABLE = myMathTests

build: mymath.o test_mymath.o
	$(CXX) $(LDFLAGS) $(TEST_SHARED_LIBS) mymath.o test_mymath.o $(LDLIBS) -o myMathTests
	echo "Compilation completed"

main.o:
	$(CXX) -c main.cpp -o main.o

mymath.o:
	$(CXX) -c mymath.cpp -o mymath.o

test_mymath.o:
	$(CXX) $(CPPFLAGS) -c test_mymath.cpp -o test_mymath.o

clean:
	rm -f $(EXECUTABLE) main.o mymath.o test_mymath.o

test: build $(EXECUTABLE)
	./$(EXECUTABLE)






2023-09-18T05:53:44.6605584Z ##[section]Starting: Build with UT execution
2023-09-18T05:53:44.6610360Z ==============================================================================
2023-09-18T05:53:44.6610575Z Task         : Command line
2023-09-18T05:53:44.6610791Z Description  : Run a command line script using Bash on Linux and macOS and cmd.exe on Windows
2023-09-18T05:53:44.6611013Z Version      : 2.178.0
2023-09-18T05:53:44.6611165Z Author       : Microsoft Corporation
2023-09-18T05:53:44.6611413Z Help         : https://docs.microsoft.com/azure/devops/pipelines/tasks/utility/command-line
2023-09-18T05:53:44.6611694Z ==============================================================================
2023-09-18T05:53:45.5770732Z Generating script.
2023-09-18T05:53:45.5771678Z ========================== Starting Command Output ===========================
2023-09-18T05:53:45.5775664Z [command]/usr/bin/bash --noprofile --norc /opt/ADO_Agent_0803/_work/_temp/e5baa3f1-3613-4423-ab3b-2937b8e1a9fd.sh
2023-09-18T05:53:45.5775997Z Building TESTREPORHEL9 Linux
2023-09-18T05:53:45.5776276Z /opt/ADO_Agent_0803/_work/4/s
2023-09-18T05:53:45.5776799Z /opt/ADO_Agent_0803/_work/_temp/e5baa3f1-3613-4423-ab3b-2937b8e1a9fd.sh: line 3: Agent.ReleaseDirectory: command not found
2023-09-18T05:53:45.5777019Z 
2023-09-18T05:53:45.5777349Z rm -f myMathTests main.o mymath.o test_mymath.o
2023-09-18T05:53:45.5777698Z /mu/bin/g++ -c mymath.cpp -o mymath.o
2023-09-18T05:53:45.5778086Z /mu/bin/g++ -I./cppunit/include -c test_mymath.cpp -o test_mymath.o
2023-09-18T05:53:45.5778538Z /mu/bin/g++ -L./cppunit/lib   mymath.o test_mymath.o -o myMathTests -lcppunit
2023-09-18T05:53:45.5778944Z /usr/bin/ld: test_mymath.o: in function `main':
2023-09-18T05:53:45.5779616Z test_mymath.cpp:(.text+0x49): undefined reference to `CppUnit::TestFactoryRegistry::getRegistry(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-18T05:53:45.5780459Z /usr/bin/ld: test_mymath.cpp:(.text+0xd5): undefined reference to `CppUnit::TextTestRunner::run(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, bool, bool)'
2023-09-18T05:53:45.5781172Z /usr/bin/ld: test_mymath.o: in function `MyMathTest::addTestsToSuite(CppUnit::TestSuiteBuilderContextBase&)':
2023-09-18T05:53:45.5782960Z test_mymath.cpp:(.text._ZN10MyMathTest15addTestsToSuiteERN7CppUnit27TestSuiteBuilderContextBaseE[_ZN10MyMathTest15addTestsToSuiteERN7CppUnit27TestSuiteBuilderContextBaseE]+0x69): undefined reference to `CppUnit::TestSuiteBuilderContextBase::getTestNameFor(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'
2023-09-18T05:53:45.5783846Z /usr/bin/ld: test_mymath.o: in function `MyMathTest::suite()':
2023-09-18T05:53:45.5784643Z test_mymath.cpp:(.text._ZN10MyMathTest5suiteEv[_ZN10MyMathTest5suiteEv]+0x4f): undefined reference to `CppUnit::TestSuite::TestSuite(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)'
2023-09-18T05:53:45.5785310Z /usr/bin/ld: test_mymath.o: in function `MyMathTest::testAdd()':
2023-09-18T05:53:45.5786110Z test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x57): undefined reference to `CppUnit::SourceLine::SourceLine(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)'
2023-09-18T05:53:45.5787287Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0xcb): undefined reference to `CppUnit::Message::Message(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-18T05:53:45.5788430Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x1bb): undefined reference to `CppUnit::SourceLine::SourceLine(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)'
2023-09-18T05:53:45.5789598Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x22f): undefined reference to `CppUnit::Message::Message(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-18T05:53:45.5791080Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x31f): undefined reference to `CppUnit::SourceLine::SourceLine(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)'
2023-09-18T05:53:45.5792323Z /usr/bin/ld: test_mymath.cpp:(.text._ZN10MyMathTest7testAddEv[_ZN10MyMathTest7testAddEv]+0x37b): undefined reference to `CppUnit::Message::Message(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-18T05:53:45.5793392Z /usr/bin/ld: test_mymath.o: in function `CppUnit::TestCaller<MyMathTest>::TestCaller(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, void (MyMathTest::*)(), MyMathTest*)':
2023-09-18T05:53:45.5794705Z test_mymath.cpp:(.text._ZN7CppUnit10TestCallerI10MyMathTestEC2ENSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEMS1_FvvEPS1_[_ZN7CppUnit10TestCallerI10MyMathTestEC5ENSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEMS1_FvvEPS1_]+0x2c): undefined reference to `CppUnit::TestCase::TestCase(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-18T05:53:45.5795658Z /usr/bin/ld: test_mymath.o: in function `CppUnit::AutoRegisterSuite<MyMathTest>::AutoRegisterSuite()':
2023-09-18T05:53:45.5796595Z test_mymath.cpp:(.text._ZN7CppUnit17AutoRegisterSuiteI10MyMathTestEC2Ev[_ZN7CppUnit17AutoRegisterSuiteI10MyMathTestEC5Ev]+0x36): undefined reference to `CppUnit::TestFactoryRegistry::getRegistry(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
2023-09-18T05:53:45.5797593Z /usr/bin/ld: test_mymath.o:(.rodata._ZTVN7CppUnit10TestCallerI10MyMathTestEE[_ZTVN7CppUnit10TestCallerI10MyMathTestEE]+0x40): undefined reference to `CppUnit::TestCase::getName[abi:cxx11]() const'
2023-09-18T05:53:45.5798673Z /usr/bin/ld: test_mymath.o:(.rodata._ZTVN7CppUnit10TestCallerI10MyMathTestEE[_ZTVN7CppUnit10TestCallerI10MyMathTestEE]+0x48): undefined reference to `CppUnit::Test::findTestPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, CppUnit::TestPath&) const'
2023-09-18T05:53:45.5799805Z /usr/bin/ld: test_mymath.o:(.rodata._ZTVN7CppUnit10TestCallerI10MyMathTestEE[_ZTVN7CppUnit10TestCallerI10MyMathTestEE]+0x58): undefined reference to `CppUnit::Test::findTest(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'
2023-09-18T05:53:45.5800921Z /usr/bin/ld: test_mymath.o:(.rodata._ZTVN7CppUnit10TestCallerI10MyMathTestEE[_ZTVN7CppUnit10TestCallerI10MyMathTestEE]+0x60): undefined reference to `CppUnit::Test::resolveTestPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'
2023-09-18T05:53:45.5801748Z collect2: error: ld returned 1 exit status
2023-09-18T05:53:45.5802089Z make: *** [Makefile:11: build] Error 1
2023-09-18T05:53:45.5826912Z ##[error]Bash exited with code '2'.
2023-09-18T05:53:45.5872668Z ##[section]Finishing: Build with UT execution

#include <cppunit/TestCase.h>
#include <cppunit/TestResult.h>
#include <cppunit/TestResultCollector.h>
#include <cppunit/TestRunner.h>
#include <cppunit/TextTestRunner.h>
#include <cppunit/extensions/TestFactoryRegistry.h>



test_mymath.cpp: In function ‘int main()’:
test_mymath.cpp:22:14: error: ‘CppUnit::TextUi’ has not been declared
   22 |     CppUnit::TextUi::TestRunner runner;
      |              ^~~~~~
test_mymath.cpp:24:5: error: ‘runner’ was not declared in this scope
   24 |     runner.addTest(registry.makeTest());


This ismy make file
CXX = /mu/bin/g++

SOURCES = mymath.cpp main.cpp test_mymath.cpp
CPPFLAGS = -I -I./cppunit/include -I./cppunit
CXXFLAGS = -std=c++11
LDFLAGS = -L -L./cppunit -L./cppunit/lib
LDLIBS = -lcppunit
EXECUTABLE = myMathTests

build: main.o mymath.o test_mymath.o
	$(CXX) $(LDFLAGS)  main.o mymath.o test_mymath.o -o myMathTests $(LDLIBS)

main.o:
	$(CXX) -c main.cpp -o main.o

mymath.o:
	$(CXX) -c mymath.cpp -o mymath.o

test_mymath.o:
	$(CXX) $(CPPFLAGS) -c test_mymath.cpp -o test_mymath.o

clean:
	rm -f $(EXECUTABLE) main.o mymath.o test_mymath.o

test: $(EXECUTABLE)
	./$(EXECUTABLE)


this is my test_mymath.cpp
#include "./cppunit/include/cppunit/extensions/HelperMacros.h"
#include "mymath.h"
#include "./cppunit/include/cppunit/TestCase.h"
#include "./cppunit/include/cppunit/TestSuite.h"
class MyMathTest:public
CppUnit::TestFixture{

    CPPUNIT_TEST_SUITE(MyMathTest);
    CPPUNIT_TEST(testAdd);
    CPPUNIT_TEST_SUITE_END();

    public:
        void testAdd(){
            CPPUNIT_ASSERT(add(2,3)==5);
            CPPUNIT_ASSERT(add(4,3)==7);
            CPPUNIT_ASSERT(add(5,3)==8);
        }
};
CPPUNIT_TEST_SUITE_REGISTRATION(MyMathTest);
int main() {
    // Create the test suite and run the tests
    CppUnit::TextUi::TestRunner runner;
    CppUnit::TestFactoryRegistry &registry = CppUnit::TestFactoryRegistry::getRegistry();
    runner.addTest(registry.makeTest());
    bool wasSuccessful = runner.run("", false);

    return wasSuccessful ? 0 : 1;
}

This is my directory structure
maindirectory
cppunit
 include
  cppunit
   include files
   include folders
 lib
  library files


Getting this error
In file included from test_mymath.cpp:1:
./cppunit/include/cppunit/extensions/HelperMacros.h:9:10: fatal error: cppunit/TestCaller.h: No such file or directory
    9 | #include <cppunit/TestCaller.h>
      |          ^~~~~~~~~~~~~~~~~~~~~~



CXX = /mu/bin/g++

SOURCES = mymath.cpp main.cpp test_mymath.cpp
#OBJECTS = $(SOURCES:.cpp=.o)
EXECUTABLE = myMathTests

build: main.o mymath.o
	$(CXX) $(LDFLAGS)  main.o mymath.o -o myMathTests

main.o:
	$(CXX) -c main.cpp -o main.o

mymath.o:
	$(CXX) -c mymath.cpp -o mymath.o



clean:
	rm -f $(EXECUTABLE) $(OBJECTS)

test: $(EXECUTABLE)
	./$(EXECUTABLE)









#include <iostream>
#include "myMath.h"

int main() {
    int result = add(2, 3);
    std::cout << "Result: " << result << std::endl;
    return 0;
}


int main() {
    // Create the test suite and run the tests
    CppUnit::TextUi::TestRunner runner;
    CppUnit::TestFactoryRegistry &registry = CppUnit::TestFactoryRegistry::getRegistry();
    runner.addTest(registry.makeTest());
    bool wasSuccessful = runner.run("", false);

    return wasSuccessful ? 0 : 1;
}



#---------------------------------------------------------------------------#
#  Makefile created for build and test CORPLIBS(mtxml)
#  
#  Created by: dmajhi@micron.com
#  Date: 06/01/2023
#---------------------------------------------------------------------------#

#-----------------------------------#
# Common variables Declration 
#-----------------------------------#

CXX=/mu/bin/g++
TARGET_DEFINITIONS = _REENTRANT NDEBUG _M_DLL MTXML2_LIBRARY_BUILD 
LIBRARY_NAME = mtxml2
LIB_NAME = libmtxml2
TEST_TARGET = libmtxml2_shared_tester
LINK = -shared
LNS = ln -s
LS	= ls -al
CP	=	cp -a
CHMOD = chmod 644
CPPFLAGS = -g3 -O2 -fvisibility=hidden -fexceptions -shared -fpermissive -fPIC
TEST_CPPFLAGS	= -g3 -O2 -fexceptions -shared -fpermissive  -fPIC
TARGET_LDFLAGS = -pthread
CURR_DIR	=	$(PWD)
CORPBUILD	=	/home/hemahanumaku/corpbuild
#CORPBUILD	=	/mu/mtapps/corp/test_common.sh
#CORPBUILD	=	/mu/mtapps/corp/
SH_FILE	=	test_common.sh

#source $(CORPBUILD)/$(SH_FILE)


#-------------------------------------#
# Shared libraries mtxml variables
#-------------------------------------#
RUNTIME_PATH = /mu/mtsdk/corplib/gcc540/lib:/home/sysprog/libraries/build/gcc540-rhel7/libmtcrypto_static:/mu/mtsdk/corplib/gcc540/lib:/mu/sdk/xerces/3.2.3-gcc540-rhel7-64/lib:/mu/sdk/xalan/1.12-gcc540-rhel7-64/lib:/mu/dev/gcc/540/lib64 -L.
LIBDIRS = /home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/lib /mu/mtsdk/corplib/gcc540/lib /home/sysprog/libraries/build/gcc540-rhel7/libmtcrypto_static /mu/mtsdk/corplib/gcc540/lib /mu/sdk/xerces/3.2.3-gcc540-rhel7-64/lib /mu/sdk/xalan/1.12-gcc540-rhel7-64/lib /mu/dev/gcc/540/lib64
LIBRARIES = mtcrypto xerces-c xalan-c mipc 

SHARED_LIBS        = -Wl,--enable-new-dtags -Wl,-rpath,$(RUNTIME_PATH) $(addprefix -L,$(LIBDIRS)) $(addprefix -l,$(LIBRARIES))
INCS += /mu/sdk/xerces/3.2.3-gcc540-rhel7-64/include /mu/sdk/xalan/1.12-gcc540-rhel7-64/include /home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/include /mu/mtsdk/corplib/gcc540/include /opt/Agent_21722/_work/1/s/include

#---------------------------------
# Make install
#--------------------------------
#INC_DESTINATION	= /home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/include 
#LIB_DESTINATION	= /home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/lib 
#INC_DIRS     += /mu/sdk/xerces/3.2.3-gcc540-rhel7-64/include /mu/sdk/xalan/1.12-gcc540-rhel7-64/include
#LIB_DIRS     += /mu/sdk/xerces/3.2.3-gcc540-rhel7-64/lib /mu/sdk/xalan/1.12-gcc540-rhel7-64/lib


INC_DESTINATION	= /home/hemahanumaku/stage/Linux/MU-RHEL70/gcc540/include 
LIB_DESTINATION	= /home/hemahanumaku/stage/Linux/MU-RHEL70/gcc540/lib


MU_INC_DEST	= /home/hemahanumaku/mu/mtsdk/corplib/gcc540/include 
MU_LIB_DEST	= /home/hemahanumaku/mu/mtsdk/corplib/gcc540/lib 


# Make stage_promote 
#--------------------------------
#INC_DESTINATION	= /mu/mtsdk/corplib/gcc540/include 
#LIB_DESTINATION	= /mu/mtsdk/corplib/gcc540/lib 

#INC_DESTINATION	= /home/corplib/dmajhi/mu/mtsdk/corplib/gcc540/include 
#LIB_DESTINATION	= /home/corplib/dmajhi/mu/mtsdk/corplib/gcc540/lib 
#----------------------------------------#
# test libraries variables
#----------------------------------------#

TEST_RUNTIIME_PATH	= /mu/dev/cppunit/1.10.2-gcc443-rhel5-64/lib:/home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/lib:/mu/mtsdk/corplib/gcc540/lib:/home/sysprog/libraries/build/gcc540-rhel7/libmtcrypto_static:/mu/mtsdk/corplib/gcc540/lib:/mu/sdk/xerces/3.2.3-gcc540-rhel7-64/lib:/mu/sdk/xalan/1.12-gcc540-rhel7-64/lib:/mu/dev/gcc/540/lib64:/mu/mtsdk/corplib/gcc540/lib:/home/sysprog/libraries/build/gcc540-rhel7/libmtcrypto_static:/mu/mtsdk/corplib/gcc540/lib:/mu/sdk/xerces/3.2.3-gcc540-rhel7-64/lib:/mu/sdk/xalan/1.12-gcc540-rhel7-64/lib:/mu/dev/gcc/540/lib64

TEST_LIBDIRS	=	/mu/dev/cppunit/1.10.2-gcc443-rhel5-64/lib \
					/home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/lib \
					/mu/mtsdk/corplib/gcc540/lib \
					/home/sysprog/libraries/build/gcc540-rhel7/libmtcrypto_static \
					/mu/mtsdk/corplib/gcc540/lib /mu/sdk/xerces/3.2.3-gcc540-rhel7-64/lib \
					/mu/sdk/xalan/1.12-gcc540-rhel7-64/lib /mu/dev/gcc/540/lib64

TEST_LIBRARIES	=	mtxml2 cppunit mipc mtmessage cmtexception

TEST_SHARED_LIBS = -Wl,--enable-new-dtags -Wl,-rpath,.,-rpath,$(TEST_RUNTIIME_PATH) $(addprefix -L,$(TEST_LIBDIRS)) $(addprefix -l,$(TEST_LIBRARIES))

TEST_INCS =	/mu/dev/cppunit/1.10.2-gcc443-rhel5-64/include \
			/home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/include \
			/mu/mtsdk/corplib/gcc540/include \
			/mu/sdk/xerces/3.2.3-gcc540-rhel7-64/include \
			/mu/sdk/xalan/1.12-gcc540-rhel7-64/include

#--------------#
# Sorce files
#--------------#

SRC_FILES = src/cmtxmlattr2w.cpp src/cmtxmlcdata2w.cpp src/cmtxmlcomment2w.cpp src/cmtxmldata.cpp \
			src/cmtxmldata2.cpp src/cmtxmldata2w.cpp src/cmtxmldataimpl2w.cpp src/cmtxmldataimplw.cpp \
			src/cmtxmldocument2w.cpp src/cmtxmlelement2w.cpp src/cmtxmlerrhandlerw.cpp src/cmtxmlimplutils2.cpp \
			src/cmtxmlmsg.cpp src/cmtxmlmsg2.cpp src/cmtxmlmsg2w.cpp src/cmtxmlmsgheader.cpp \
			src/cmtxmlmsgheaderimpl.cpp src/cmtxmlmsgimpl.cpp src/cmtxmlmsgimpl2.cpp src/cmtxmlnode2.cpp \
			src/cmtxmlnode2w.cpp src/cmtxmlnodeimpl2.cpp src/cmtxmlpi2w.cpp src/cmtxmlutils2.cpp src/cmtxsl2.cpp \
			src/cmtxsl2w.cpp src/cmtxslimpl2w.cpp src/cmtxmlmsgutil.cpp

#SRC_FILES = cmtxmlattr2w.cpp cmtxmlcdata2w.cpp cmtxmlcomment2w.cpp cmtxmldata.cpp \
			cmtxmldata2.cpp cmtxmldata2w.cpp cmtxmldataimpl2w.cpp cmtxmldataimplw.cpp \
			cmtxmldocument2w.cpp cmtxmlelement2w.cpp cmtxmlerrhandlerw.cpp cmtxmlimplutils2.cpp \
			cmtxmlmsg.cpp cmtxmlmsg2.cpp cmtxmlmsg2w.cpp cmtxmlmsgheader.cpp \
			cmtxmlmsgheaderimpl.cpp cmtxmlmsgimpl.cpp cmtxmlmsgimpl2.cpp cmtxmlnode2.cpp \
			cmtxmlnode2w.cpp cmtxmlnodeimpl2.cpp cmtxmlpi2w.cpp cmtxmlutils2.cpp cmtxsl2.cpp \
			cmtxsl2w.cpp cmtxslimpl2w.cpp cmtxmlmsgutil.cpp
#------------------#
#header files:
#------------------#
#HEADERS = include/cmtxmlattr2.h include/cmtxmlcdata2.h include/cmtxmlcomment2.h include/cmtxmldata.h \
		  include/cmtxmldata2.h include/cmtxmldocument2.h include/cmtxmlelement2.h include/cmtxmlexception.h \
		  include/cmtxmlexception2.h include/cmtxmlmsg.h include/cmtxmlmsg2.h include/cmtxmlmsgexception.h \
		  include/cmtxmlmsgheader.h include/cmtxmlnode2.h include/cmtxmlpi2.h include/cmtxmlutils2.h \
		  include/cmtxsl2.h include/cmtxmlmsgutil.h

DEPLOYABLE_HEADERS=include/cmtxmlattr2.h include/cmtxmlcdata2.h include/cmtxmlcomment2.h include/cmtxmldata.h \
		  include/cmtxmldata2.h include/cmtxmldocument2.h include/cmtxmlelement2.h include/cmtxmlexception.h \
		  include/cmtxmlexception2.h include/cmtxmlmsg.h include/cmtxmlmsg2.h include/cmtxmlmsgexception.h \
		  include/cmtxmlmsgheader.h include/cmtxmlnode2.h include/cmtxmlpi2.h include/cmtxmlutils2.h \
		  include/cmtxsl2.h include/cmtxmlmsgutil.h

NON_DEPLOYABLE_HEADERS =  include/auto_ptr_array.h include/cmtxmldataimpl2w.h include/cmtxmldataimplw.h \
			include/cmtxmlerrhandlerw.h include/cmtxmlimplutils2.h include/cmtxmlmsgheaderimpl.h \
			include/cmtxmlmsgimpl.h include/cmtxmlmsgimpl2.h include/cmtxmlnodeimpl2.h \
			include/cmtxslimpl2w.h include/hexbincv.hpp include/mtxml2_resource.h
#-------------------#
#Test source files
#------------------#

TEST_SRCS = src/UnitTests/MTXML2CppUnitTests.cpp src/UnitTests/CMTXMLDocument2Tests.cpp src/UnitTests/CMTXMLNode2Tests.cpp src/UnitTests/CMTXMLMsg2Tests.cpp \
            src/UnitTests/CMTXMLData2Tests.cpp src/UnitTests/CMTXMLElement2Tests.cpp src/UnitTests/CMTXSL2Tests.cpp src/UnitTests/CMTXMLDataTests.cpp

#------------------#
# Test header files:
#------------------#

TEST_HDRS = MTXML2CppUnitTests.h CMTXMLDocument2Tests.h CMTXMLNode2Tests.h CMTXMLMsg2Tests.h \
			CMTXMLData2Tests.h CMTXMLElement2Tests.h CMTXSL2Tests.h employees.xml employees.xsl \
			mtxml2test.xml mtxml2test.xsd mtxml2testInvalid.xml mtxml2testns.xml mtxml2testns.xsd \
			xsltest1.xml xsltest1.xsl xsltest2.xml xsltest2.xsl xsltest3.xml CMTXMLDataTests.h

TEST_DEFINITIONS = _REENTRANT NDEBUG _M_DLL MTXML2_LIBRARY_BUILD XERCES3_ERRMSG

ifdef WIDE_TEST
    TEST_DEFINITIONS += MTXML2W_TEST
endif


TEST_LIBS = cppunit mipc mtmessage cmtexception

#-----------------------------------#
# Version tag updation for CORPLIB
#-----------------------------------#

ifeq ($(strip $(RELEASE)),)
override LIB_EXT := dev
else
	ifneq (,$(findstring _,$(RELEASE)))
		RELEASE_TEMP := $(RELEASE)
		ifneq (,$(findstring /,$(RELEASE_TEMP)))
			RELEASE_TEMP := $(shell echo $(RELEASE_TEMP) | awk -F\/ '{print $$1}')
		endif
			override LIB_EXT := $(shell echo $(RELEASE_TEMP) | awk -F\_ '{print $$2}')
	else
		override LIB_EXT := $(RELEASE)
	endif
endif

override LIB_NAME          := lib$(LIBRARY_NAME)
override SHARED_LIB        := $(LIB_NAME).so.$(LIB_EXT)

#-----------------------------------------#
# Make all libs
#-----------------------------------------#
#.PHONY: all 
#all: build depends 
all: build 

#----------------------------------------#
#Builing shared object (.so) for CORPLIB:
#----------------------------------------#



OBJS = $(SRC_FILES:%.cpp=%.o)

build: $(OBJS)
	$(RM) *.so.*
	$(CXX) $(LINK) -o $(SHARED_LIB) $(OBJS) $(TARGET_LDFLAGS) $(SHARED_LIBS)
	$(RM) libmtxml2.so 
	$(LNS) $(SHARED_LIB) libmtxml2.so  

#---------------------------------#
#Building object filed (.o) files:
#---------------------------------#

$(OBJS):%.o :%.cpp
	@echo "CORPLIB compilation starts..."
	$(CXX) -c $(CPPFLAGS) $(addprefix -D,$(TARGET_DEFINITIONS)) $(addprefix -I,$(INCS)) -o $@ $<
	@echo "COPRPLIB ompilation completed"

#--------------------------------------#
#Building shared object (.so) for test
#--------------------------------------#
TEST_OBJS= $(TEST_SRCS:%.cpp=%.o)

.PHONY: depends 
depends: $(TEST_OBJS)
	@echo "Test linking starts ...!!!"
	$(CXX) -o  $(TEST_TARGET) $(TEST_OBJS) $(TARGET_LDFLAGS) $(TEST_SHARED_LIBS)
	@echo "Test linking completed"
	@echo "Please use make test to run test-case"

#------------------------------------------#
#Building object filed (.o) files for test
#------------------------------------------#

$(TEST_OBJS): %.o :%.cpp
	@echo "test compilation starts "
	$(CXX) -c $(TEST_CPPFLAGS) $(addprefix -D,$(TEST_DEFINITIONS)) $(addprefix -I,$(TEST_INCS)) -o $@ $<
	@echo "test compilation completed"


#.SILENT:TEST_SC
.PHONY:TEST_SC
TEST_SC:
		#@echo " TEST_SC --> $(LIB_NAME).so"
		@echo " TEST_SC --> $(SHARED_LIB)--->$(LIB_EXT)"
#--------------------------------#
# clean the libraries:
#--------------------------------#
.PHONY: clean
clean:
	@echo " clean starts..."
	$(RM) $(SHARED_LIB)
	$(RM) $(TEST_TARGET)
	$(RM) $(OBJS)
	$(RM) $(TEST_OBJS)
	$(RM) *.so 
	$(RM) *.o

#-----------------------------#
# Running test-case
#----------------------------#
.PHONY: test
test: depends
	@echo "running test case!!!"
	./$(TEST_TARGET)

# Need to be deleted  from here........
#-----------------------------------------------------------	

.PHONY: LIB_TEST
LIB_TEST:
		#@echo  -e "Promote (copy) libraries\nfrom: $(CURR_DIR)\nto: $(LIB_DESTINATION)"
		#@echo "-$(SHARED_LIB)"
		#@echo "Change symbolic links"
		#@echo -e "Promote (copy) headers\nfrom: $(CURR_DIR)\nto: $(INC_DESTINATION)"
		#@echo "$(DEPYLOYABLE_HEADERS)" 

			#$(CP)	$(SHARED_LIB)	$(LIB_DESTINATION);
			#$(CP)	$(DEPYLOYABLE_HEADERS)	$(INC_DESTINATION);
		 	#echo "$(shell ./linkLib.sh)"; 
			#$(PWD); 

#.SILENT:TEST_SC
#TEST_SC:
		@echo " TEST_SC --> $(LIB_NAME).so"
		#@echo " TEST_SC --> $(SHARED_LIB)--->$(LIB_EXT)"
		#$(CORPBUILD)/$(SH_FILE) sharedLibName $(SHARED_LIB) 
		$(CORPBUILD) sharedLibName $(SHARED_LIB) 
		#$(CORPBUILD)/$(SH_FILE) muLibPath $(LIB_DESTINATION) $(MU_LIB_DEST)
		#./test_common.sh muIncPath $(INC_DESTINATION) $(MU_INC_DEST)
		#./test_common.sh cpHdr_to_mu $(DEPYLOYABLE_HEADERS) $(INC_DESTINATION) $(MU_INC_DEST)
		#$(CORPBUILD)/$(SH_FILE) linkingLib_stg $(LIB_DESTINATION) $(SHARED_LIB) $(LIB_NAME).so
		#$(CORPBUILD)/$(SH_FILE) linkingLib_mu $(MU_LIB_DEST) $(SHARED_LIB) $(LIB_NAME).so
		#./test_common.sh cpHdr_to_stage $(DEPYLOYABLE_HEADERS) $(CURR_DIR) $(INC_DESTINATION)
		#./test_common.sh cpLib_to_stage $(SHARED_LIB) $(CURR_DIR) $(LIB_DESTINATION)
		#./test_common.sh cpLib_to_mu $(SHARED_LIB) $(LIB_DESTINATION) $(MU_LIB_DEST)
		#$(CORPBUILD)/$(SH_FILE) hdrFilePermission_stg $(DEPLOYABLE_HEADERS) $(INC_DESTINATION)
		#$(CORPBUILD)/$(SH_FILE) hdrFilePermission_stg $(DEPLOYABLE_HEADERS)

#-----------------------------------------------------------

# Delete upto here......

#------------------------------#
# Make install
#------------------------------#

.SILENT: install 
install: 
		$(CORPBUILD)/$(SH_FILE) stgLibPath $(LIB_DESTINATION)
		$(CORPBUILD)/$(SH_FILE) sharedLibName $(SHARED_LIB) 
		$(CORPBUILD)/$(SH_FILE) stgIncPath $(INC_DESTINATION)
		$(CORPBUILD)/$(SH_FILE) deployHeaderList $(DEPLOYABLE_HEADERS)
		$(CORPBUILD)/$(SH_FILE) cpHdr_to_stage $(DEPLOYABLE_HEADERS) $(CURR_DIR) $(INC_DESTINATION) 
		$(CORPBUILD)/$(SH_FILE) hdrFilePermission_stg $(DEPLOYABLE_HEADERS) $(INC_DESTINATION)
		$(CORPBUILD)/$(SH_FILE) cpLib_to_stage $(SHARED_LIB) $(CURR_DIR) $(LIB_DESTINATION)
		$(CORPBUILD)/$(SH_FILE) linkingLib_stg $(LIB_DESTINATION) $(SHARED_LIB) $(LIB_NAME).so

#------------------------------#
# Make stage_promote 
# -----------------------------#

.SILENT: stage_promote 
stage_promote: 
		$(CORPBUILD)/$(SH_FILE) muLibPath $(LIB_DESTINATION) $(MU_LIB_DEST)
		$(CORPBUILD)/$(SH_FILE) sharedLibName $(SHARED_LIB)
		$(CORPBUILD)/$(SH_FILE) muIncPath $(INC_DESTINATION) $(MU_INC_DEST)
		$(CORPBUILD)/$(SH_FILE) deployHeaderList $(DEPLOYABLE_HEADERS)
		$(CORPBUILD)/$(SH_FILE) cpHdr_to_mu $(DEPLOYABLE_HEADERS) $(INC_DESTINATION) $(MU_INC_DEST)
		$(CORPBUILD)/$(SH_FILE) hdrFilePermission_mu $(DEPLOYABLE_HEADERS) $(MU_INC_DEST)
		$(CORPBUILD)/$(SH_FILE) cpLib_to_mu $(SHARED_LIB) $(LIB_DESTINATION) $(MU_LIB_DEST)
		$(CORPBUILD)/$(SH_FILE) linkingLib_mu $(MU_LIB_DEST) $(SHARED_LIB) $(LIB_NAME).so








# the compiler: gcc for C program, define as g++ for C++
# compiler flags:
#   #  -g     - this flag adds debugging information to the executable file
#  -Wall  - this flag is used to turn on most compiler warnings
#    CFLAGS  = -g -Wall
#     
#   # The build target 

CC=g++
CFLAGS=-c -g3 -o2 

TARGET = libmtxml2.so.dev

#all: $(TARGET)
#	$(TARGET): $(TARGET).c
#	$(CC) $(CFLAGS) -o $(TARGET) $(TARGET).c


#clean:
#	$(RM) $(TARGET)

all:
	$(CC) -shared -o $(TARGET)  -pthread cmtxmlattr2w.o cmtxmlcdata2w.o cmtxmlcomment2w.o cmtxmldata.o cmtxmldata2.o cmtxmldata2w.o cmtxmldataimpl2w.o cmtxmldataimplw.o cmtxmldocument2w.o cmtxmlelement2w.o cmtxmlerrhandlerw.o cmtxmlimplutils2.o cmtxmlmsg.o cmtxmlmsg2.o cmtxmlmsg2w.o cmtxmlmsgheader.o cmtxmlmsgheaderimpl.o cmtxmlmsgimpl.o cmtxmlmsgimpl2.o cmtxmlnode2.o cmtxmlnode2w.o cmtxmlnodeimpl2.o cmtxmlpi2w.o cmtxmlutils2.o cmtxsl2.o cmtxsl2w.o cmtxslimpl2w.o cmtxmlmsgutil.o            -Wl,--enable-new-dtags -Wl,-rpath,/mu/mtsdk/corplib/gcc540/lib:/home/sysprog/libraries/build/gcc540-rhel7/libmtcrypto_static:/mu/mtsdk/corplib/gcc540/lib:/mu/sdk/xerces/3.2.3-gcc540-rhel7-64/lib:/mu/sdk/xalan/1.12-gcc540-rhel7-64/lib:/mu/dev/gcc/540/lib64 -L. -L/home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/lib -L/mu/mtsdk/corplib/gcc540/lib -L/home/sysprog/libraries/build/gcc540-rhel7/libmtcrypto_static -L/mu/mtsdk/corplib/gcc540/lib -L/mu/sdk/xerces/3.2.3-gcc540-rhel7-64/lib -L/mu/sdk/xalan/1.12-gcc540-rhel7-64/lib -L/mu/dev/gcc/540/lib64 -lmtcrypto -lxerces-c -lxalan-c -lmtmessage

#OBJ: cmtxmlattr2w.o
#	/mu/bin/g++ -c  -g3 -O2 -fvisibility=hidden -fexceptions -shared -fpermissive -fPIC -pthread -D_REENTRANT -DNDEBUG -D_M_DLL -DMTXML2_LIBRARY_BUILD -I. -I/home/sysprog/libraries/stage/Linux/MU-RHEL70/gcc540/include -I/mu/mtsdk/corplib/gcc540/include -I/mu/mtsdk/corplib/gcc540/include -I/mu/sdk/xerces/3.2.3-gcc540-rhel7-64/include -I/mu/sdk/xalan/1.12-gcc540-rhel7-64/include -o cmtxmlattr2w.o cmtxmlattr2w.cpp

clean:
	$(RM) $(TARGET)
	$(RM) *.so 

















#==============================================================================
# File:          $HeadURL: http://svn/corp/DirSvc/MTGroups/trunk/MTGroups80/branches/x64/trunk/Makefile.lib_config $
# Revision:      $LastChangedRevision: 15216 $
# Modified By:   $LastChangedBy: ddlalum $
# Modified Date: $LastChangedDate: 2010-11-05 11:13:31 -0600 (Fri, 05 Nov 2010) $
#
#     This file is used with lbsmake to build and deploy the library.
#     "lbsmake test" will build either a MBCS or wide regression tester depending on whether
#     MTXML2W_TEST defined. Wide tests can be run as follows:
#
#       lbsmake test_clean; WIDE_TEST=1 lbsmake test
#
# Regression testing is implemented with cppunit.
#
#==============================================================================
 
LIBRARY_NAME          = mtgroups
LIBRARY_CONTACTS      = ww_layered_gm_l2@micron.com

DEFINITIONS   = _REENTRANT NDEBUG _M_DLL MTGROUPS_LIBRARY_BUILD
ifdef WIDE_TEST
    DEFINITIONS += MTGROUPSW_TEST 
endif
ifeq ($(DISK_BUILD), TRUE)      #DISK Build Settings
        SRC_REPOSITORY = DISK
		SRC_DIR         = source
		INC_DIRS    = include
	    SRC_FILES     = cmtgroup.cpp cmtgroupssockets.cpp cmtgroupssocketsw.cpp cmtgroupw.cpp \
		 				cmtldap.cpp cmtldapw.cpp cmtworker.cpp cmtworkerw.cpp \
		  				mtgroupscapi.cpp mtgroupscapiw.cpp mtgroupslibrary.cpp mtgroups.c
		TEST_SRC_DIR = source/UnitTests

else
ifeq ($(OS_MAJOR_VERSION), 7) #RHEL 7 host (GCC 5.4.0)
SRC_REPOSITORY = SVN
SRC_SVN_REPOSITORY_DIRECTORY = http://svn/corp/DirSvc/MTGroups/trunk/MTGroups141
TEST_SRC_SVN_REPOSITORY_DIRECTORY = http://svn/corp/DirSvc/MTGroups/trunk/MTGroups141
else
SRC_REPOSITORY = SVN
SRC_SVN_REPOSITORY_DIRECTORY = http://svn/corp/DirSvc/MTGroups/trunk/MTGroups100
TEST_SRC_SVN_REPOSITORY_DIRECTORY = http://svn/corp/DirSvc/MTGroups/trunk/MTGroups100
endif
SRC_FILES     = source/cmtgroup.cpp source/cmtgroupssockets.cpp source/cmtgroupssocketsw.cpp source/cmtgroupw.cpp \
		        source/cmtldap.cpp source/cmtldapw.cpp source/cmtworker.cpp source/cmtworkerw.cpp \
		        source/mtgroupscapi.cpp source/mtgroupscapiw.cpp source/mtgroupslibrary.cpp source/mtgroups.c
endif

DEPLOYABLE_HEADERS = include/cmtgroups.h include/mtgroups.h include/mtgroupscapi.h

NON_DEPLOYABLE_HEADERS =  include/cmtgroupssockets.h include/cmtldap.h include/mtgroupswmacros.h

CPPFLAGS = -g3 -O2 -fvisibility=hidden -fexceptions -Wno-deprecated-declarations

# Since it is unlikely that apps consuming this library will built with hidden symbols,
# remove this option for the binary created by "lbsmake test"
ifeq ($(WHICH),test)
	CPPFLAGS := $(filter-out -fvisibility=hidden,$(CPPFLAGS))
endif

STATIC    = FALSE
LIBRARIES = ldap mipc mtsecurity mtdatetime mtmessage mtmailpage

ifeq ($(OS), SunOS)
    DESTINATION  = MU-SUNOS58-GCC422
    INC_DIRS     = 
    LIB_DIRS     = 
endif

ifeq ($(OS), Linux)
	ifeq ($(OS_MAJOR_VERSION), 7) #RHEL 7 host (GCC 5.4.0)
    DESTINATION  =  MU-RHEL70-GCC540
    DEFINITIONS += LDAP_DEPRECATED
	else
    DESTINATION  =  MU-RHEL50-GCC422
    DEFINITIONS += LDAP_DEPRECATED
    INC_DIRS     = 
    LIB_DIRS     = 
	endif
endif

TEST_SRC_SVN_REPOSITORY_DIR_PATH = source/UnitTests
TEST_SRC_DIR = source/UnitTests
TEST_SRCS     = MTGroupsCppUnitTests.cpp CMTGroupsUnitTest.cpp CMTWorkerUnitTest.cpp \
		        MTGroupsCAPIUnitTest.cpp MTWorkerCAPIUnitTest.cpp
TEST_HDRS     = MTGroupsCppUnitTests.h
TEST_INC_DIRS = /mu/dev/cppunit/1.10.2-gcc443-rhel5-64/include
TEST_LIB_DIRS = /mu/dev/cppunit/1.10.2-gcc443-rhel5-64/lib
TEST_LIBS     = cppunit





















# Makefile

CXX = g++
CPPFLAGS = -I/usr/local/include
CXXFLAGS = -std=c++11
LDFLAGS = -L/usr/local/lib
LDLIBS = -lcppunit

SOURCES = myMath.cpp test_myMath.cpp
OBJECTS = $(SOURCES:.cpp=.o)
EXECUTABLE = myMathTests

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
    $(CXX) $(LDFLAGS) $(OBJECTS) -o $@ $(LDLIBS)

.cpp.o:
    $(CXX) $(CXXFLAGS) $(CPPFLAGS) -c $< -o $@

clean:
    rm -f $(EXECUTABLE) $(OBJECTS)

test: $(EXECUTABLE)
    ./$(EXECUTABLE)


CXX = g++
CPPFLAGS = -I/usr/local/include
CXXFLAGS = -std=c++11
LDFLAGS = -L/usr/local/lib
LDLIBS = -lcppunit

SOURCES = myMath.cpp test_myMath.cpp
OBJECTS = $(SOURCES:.cpp=.o)
EXECUTABLE = myMathTests

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
	$(CXX) $(LDFLAGS) $(OBJECTS) -o $@ $(LDLIBS)

.cpp.o:
	$(CXX) $(CXXFLAGS) $(CPPFLAGS) -c $< -o $@

clean:
	rm -f $(EXECUTABLE) $(OBJECTS)

test: $(EXECUTABLE)
	./$(EXECUTABLE)





















